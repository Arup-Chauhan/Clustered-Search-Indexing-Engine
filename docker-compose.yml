services:
db:
image: postgres:16
environment:
POSTGRES_DB: engine
POSTGRES_USER: engine
POSTGRES_PASSWORD: engine
ports: ["5432:5432"]
redis:
image: redis:7-alpine
ports: ["6379:6379"]
app:
build: .
depends_on: [db, redis]
environment:
POSTGRES_URL: jdbc:postgresql://db:5432/engine
POSTGRES_USER: engine
POSTGRES_PASSWORD: engine
REDIS_HOST: redis
ENGINE_INDEX_PATH: /data/index
JWT_HMAC_BASE64: c2VjcmV0c2VjcmV0c2VjcmV0c2VjcmV0c2VjcmV0
ports: ["8080:8080"]
volumes:
  - ./data:/data